---
title: 【基础】TCP和UDP的区别
date: 2021-03-13 21:42:52
toc: true
tags:
- 面试 
- 计算机网络
categories:
- 基础
---

TCP协议全称是传输控制协议是一种面向连接的、可靠的、基于字节流的传输层通信协议，由 IETF 的RFC 793定义。TCP 是面向连接的、可靠的流协议。

UDP协议全称是用户数据报协议，在网络中它与TCP协议一样用于处理数据包，是一种无连接的协议。UDP有不提供数据包分组、组装和不能对数据包进行排序的缺点，也就是说，当报文发送之后，是无法得知其是否安全完整到达的。

<!-- more -->

## 比较
| |UDP | TCP|
|  ----  |  ----  | ----  |
|是否连接|无连接|面向连接|
是否可靠|	不可靠传输，不使用流量控制和拥塞控制|	可靠传输，使用流量控制和拥塞控制
|连接对象个数|	支持一对一，一对多，多对一和多对多交互通信	|只能是一对一通信|
|传输方式	|面向报文	|面向字节流|
|首部开销	|首部开销小，仅8字节|	首部最小20字节，最大60字节|
|适用场景	|适用于实时应用（IP电话、视频会议、直播等）	|适用于要求可靠传输的应用，例如文件传输|

## 头部
![UDP头部](/img/UDPhead.png)
![TCP头部](/img/TCPhead.png)

### UDP头
`总长度：8字节`
源端口号
发送方端口号，需要对方回信时使用，不需要可以全用0，

目的端口号
目的端口号。终点交付报文时必须使用

长度
UDP数据报长度,最小值8

检验和
检测UDP用户数据包在传输中是否有错

### TCP头
`总长度：20字节`
源端口和目的端口，各占2个字节，分别写入源端口和目的端口；
序号，占4个字节，TCP连接中传送的字节流中的每个字节都按顺序编号。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始；
确认号，占4个字节，是期望收到对方下一个报文的第一个数据字节的序号。例如，B收到了A发送过来的报文，其序列号字段是501，而数据长度是200字节，这表明B正确的收到了A发送的到序号700为止的数据。因此，B期望收到A的下一个数据序号是701，于是B在发送给A的确认报文段中把确认号置为701；
数据偏移，占4位，它指出TCP报文的数据距离TCP报文段的起始处有多远；
保留，占6位，保留今后使用，但目前应都位0；
紧急URG，当URG=1，表明紧急指针字段有效。告诉系统此报文段中有紧急数据；
确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；
推送PSH，当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能收到对方的响应，这时候就将PSH=1；
复位RST，当RST=1，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立连接；
同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；
终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放；
窗口，占2字节，指的是通知接收方，发送本报文你需要有多大的空间来接受；
检验和，占2字节，校验首部和数据这两部分；
紧急指针，占2字节，指出本报文段中的紧急数据的字节数；
选项，长度可变，定义一些其他的可选的参数。


### IP首部
`总长度：20字节`
