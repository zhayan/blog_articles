---
title: 【C++】虚函数
date: 2020-12-22 21:08:07
toc: true
tags:
- C++
categories:
- C++
---
参考：https://blog.csdn.net/haoel/article/details/1948051/
C++多态(polymorphism)是通过虚函数来实现的，虚函数允许子类重新定义成员函数，而子类重新定义父类的做法称为覆盖(override)，或者称为重写。
最常见的用法就是声明基类的指针，利用该指针指向任意一个子类对象，调用相应的虚函数，即为动态绑定。
<!-- more -->

## 纯虚函数
纯虚函数是在基类中声明的虚函数，它在基类中没有定义，但要求任何派生类都要定义自己的实现方法。在基类中实现纯虚函数的方法是在函数原型后加“=0” 。
包含纯虚函数的类称为抽象类。由于抽象类包含了没有定义的纯虚函数，所以不能定义抽象类的对象。

## 虚函数表 
对C++ 了解的人都应该知道虚函数（Virtual Function）是通过一张虚函数表（Virtual Table）来实现的。简称为V-Table。
在这个表中，包含一个类的虚函数的地址表，这张表解决了继承、覆盖的问题，保证其容真实反应实际的函数。

一般继承（无虚函数覆盖）
1）虚函数按照其声明顺序放于表中。
2）父类的虚函数在子类的虚函数前面。

一般继承（有虚函数覆盖）
1）覆盖的f()函数被放到了虚表中原来父类虚函数的位置。
2）没有被覆盖的函数依旧。

多重继承（无虚函数覆盖）
1）  每个父类都有自己的虚表。
2）  子类的成员函数被放到了第一个父类的表中。（所谓的第一个父类是按照声明顺序来判断的）

多重继承（有虚函数覆盖）
多个父类虚函数表中的f()的位置被替换成了子类的函数指针。

## 虚函数表存放
虚函数表与类绑定，每个类有对应的虚函数表，编译时确定，对象有指向对应虚函数表的指针。
虚函数表类似于类中静态成员变量。存放在全局数据区。
